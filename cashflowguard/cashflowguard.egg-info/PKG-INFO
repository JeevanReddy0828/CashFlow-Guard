Metadata-Version: 2.4
Name: cashflowguard
Version: 1.0.0
Summary: Production-grade cash flow and invoice collections management system for SMBs
Author-email: Jeevan Arlagadda <jeevan@example.com>
License: MIT
Keywords: invoice,cash-flow,collections,accounts-receivable,smb
Classifier: Development Status :: 4 - Beta
Classifier: Intended Audience :: Financial and Insurance Industry
Classifier: Programming Language :: Python :: 3.11
Classifier: Programming Language :: Python :: 3.12
Requires-Python: >=3.11
Description-Content-Type: text/markdown
Requires-Dist: pandas>=2.0.0
Requires-Dist: numpy>=1.24.0
Requires-Dist: scikit-learn>=1.3.0
Requires-Dist: typer>=0.9.0
Requires-Dist: pydantic>=2.0.0
Requires-Dist: jinja2>=3.1.0
Requires-Dist: matplotlib>=3.7.0
Requires-Dist: seaborn>=0.12.0
Requires-Dist: fastapi>=0.100.0
Requires-Dist: uvicorn>=0.23.0
Requires-Dist: python-multipart>=0.0.6
Requires-Dist: rich>=13.0.0
Provides-Extra: dev
Requires-Dist: pytest>=7.4.0; extra == "dev"
Requires-Dist: pytest-cov>=4.1.0; extra == "dev"
Requires-Dist: black>=23.0.0; extra == "dev"
Requires-Dist: ruff>=0.1.0; extra == "dev"
Requires-Dist: mypy>=1.5.0; extra == "dev"
Requires-Dist: ipython>=8.14.0; extra == "dev"

# CashFlowGuard ğŸ’°

**Production-grade cash flow and invoice collections management system for small businesses**

CashFlowGuard helps SMBs reduce late payments by tracking invoices, predicting payment risks, prioritizing collections, and automating outreach.

## ğŸ¯ Problem Solved

Late invoice payments create cash-flow gaps that hurt payroll, inventory, and growth. CashFlowGuard provides:

- **Predictive analytics**: Which invoices are likely to be paid late?
- **Prioritized actions**: What should you chase first?
- **Automated outreach**: Ready-to-send email/SMS templates
- **Cash forecasting**: Expected cash inflows over 7/14/30 days
- **Performance tracking**: What collection strategies work?

## ğŸš€ Quick Start

### Installation

```bash
# Clone and install
git clone <repo-url>
cd cashflowguard
pip install -e .

# Or with dev dependencies
pip install -e ".[dev]"
```

### Basic Usage

```bash
# 1. Validate your data
cashflowguard validate --data-dir data/sample/

# 2. Analyze accounts receivable
cashflowguard analyze --data-dir data/sample/ --as-of 2026-02-07

# 3. Train prediction model
cashflowguard train --data-dir data/sample/ --model-dir models/

# 4. Score invoices for late payment risk
cashflowguard score --data-dir data/sample/ --model-dir models/

# 5. Generate weekly collections plan
cashflowguard plan --data-dir data/sample/ --week 2026-02-09 --top 30 --tone friendly

# 6. Record collection actions
cashflowguard action --invoice INV-001 --type reminder1 --notes "Sent friendly reminder"

# 7. Simulate cash impact
cashflowguard simulate --data-dir data/sample/ --scenarios 100
```

## ğŸ“Š Features

### 1. Invoice & Payment Tracking
- Import invoices, customers, and payments from CSV
- Strict validation with helpful error messages
- Support for multiple currencies and payment terms

### 2. Analytics & Metrics
- **Aging analysis**: Current, 1-15, 16-30, 31-60, 61-90, 90+ days
- **DSO (Days Sales Outstanding)**: Industry-standard metric
- **Payment behavior**: Late rate, average days late, median
- **Customer risk ranking**: Based on history and concentration
- **Cash forecasting**: Predict inflows for next 7/14/30 days

### 3. ML-Powered Risk Prediction
- Gradient Boosting model predicts late payment probability
- Features: customer history, invoice amount, seasonality, terms
- Risk score 0-100 for easy interpretation
- Time-based validation (no data leakage)
- Fallback to rules-based scoring if no payment history

### 4. Smart Collections Recommendations
Priority-based action ladder:
- **0-3 days overdue**: Friendly reminder
- **4-10 days**: Reminder + invoice copy + inquiry
- **11-20 days**: Firmer tone + call suggestion
- **21-45 days**: Payment plan offer + service pause
- **45+ days**: Final notice + escalation

### 5. Automated Message Generation
- Jinja2 templates for email and SMS
- Three tones: friendly, neutral, firm
- Personalized with customer data
- No actual sending (templates only)

### 6. Action Tracking & Audit Log
- Record all collection activities
- Track outcomes (success, no response, dispute)
- Measure collection effectiveness
- Build institutional knowledge

## ğŸ“ Data Format

### customers.csv
```csv
customer_id,name,email,phone,industry,country,state,payment_terms_days,credit_limit,created_at
CUST-001,Acme Corp,billing@acme.com,555-0100,Technology,USA,CA,30,50000,2024-01-15
```

### invoices.csv
```csv
invoice_id,customer_id,issue_date,due_date,invoice_amount,currency,status,invoice_type,channel,created_at
INV-001,CUST-001,2025-12-01,2025-12-31,15000,USD,open,recurring,online,2025-12-01
```

### payments.csv (optional)
```csv
payment_id,invoice_id,payment_date,amount,method,status
PAY-001,INV-001,2026-01-05,15000,bank_transfer,completed
```

### actions.csv (auto-generated)
```csv
action_id,invoice_id,action_type,action_date,notes,outcome
ACT-001,INV-001,reminder1,2026-01-15,Sent friendly reminder,success
```

## ğŸ§® Metrics Explained

### Days Sales Outstanding (DSO)
```
DSO = (Accounts Receivable / Total Credit Sales) Ã— Number of Days
```
Lower is better. Industry average: 30-60 days.

### Risk Score (0-100)
- **0-30**: Low risk - likely to pay on time
- **31-60**: Medium risk - monitor closely
- **61-85**: High risk - proactive outreach needed
- **86-100**: Very high risk - immediate action required

Calculated using:
- Historical payment behavior (50%)
- Invoice characteristics (25%)
- Customer profile (15%)
- Seasonality & timing (10%)

### Collection Effectiveness Index (CEI)
```
CEI = (Beginning AR + Credit Sales - Ending AR) / (Beginning AR + Credit Sales - Ending Current AR) Ã— 100
```
Measures how efficiently you collect receivables.

## ğŸ¨ Output Examples

### Terminal Output
```
â•­â”€ Accounts Receivable Summary (as of 2026-02-07) â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â•®
â”‚ Total AR:              $487,350                                   â”‚
â”‚ Overdue AR:            $156,200 (32.1%)                          â”‚
â”‚ DSO:                   42.3 days                                  â”‚
â”‚ Collection Rate:       87.4%                                      â”‚
â•°â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â•¯

Aging Breakdown:
  Current (0 days):      $231,150 (47.4%)
  1-15 days overdue:     $78,900 (16.2%)
  16-30 days overdue:    $45,600 (9.4%)
  31-60 days overdue:    $31,700 (6.5%)
  60+ days overdue:      $100,000 (20.5%)
```

### Collections Plan
```
Top 10 Invoices to Chase (Week of 2026-02-09):

  1. INV-234 | TechFlow Inc | $45,000 | 32 days overdue | Risk: 87
     â†’ Action: firm_reminder + call
     â†’ Template: outputs/messages/INV-234_email.txt
  
  2. INV-189 | DataCo LLC | $28,500 | 18 days overdue | Risk: 72
     â†’ Action: second_notice
     â†’ Template: outputs/messages/INV-189_email.txt
```

## ğŸ§ª Generating Sample Data

```bash
# Generate synthetic data for testing
python scripts/generate_synthetic_data.py --customers 100 --invoices 500 --months 12
```

## ğŸ—ï¸ Project Structure

```
cashflowguard/
â”œâ”€â”€ cashflowguard/
â”‚   â”œâ”€â”€ cli.py                  # CLI commands
â”‚   â”œâ”€â”€ config.py               # Configuration
â”‚   â”œâ”€â”€ io/
â”‚   â”‚   â”œâ”€â”€ loaders.py          # CSV loading
â”‚   â”‚   â””â”€â”€ validators.py       # Data validation
â”‚   â”œâ”€â”€ analytics/
â”‚   â”‚   â”œâ”€â”€ ar_metrics.py       # AR calculations
â”‚   â”‚   â”œâ”€â”€ aging.py            # Aging analysis
â”‚   â”‚   â””â”€â”€ forecasting.py      # Cash forecasting
â”‚   â”œâ”€â”€ ml/
â”‚   â”‚   â”œâ”€â”€ features.py         # Feature engineering
â”‚   â”‚   â”œâ”€â”€ train.py            # Model training
â”‚   â”‚   â”œâ”€â”€ predict.py          # Scoring
â”‚   â”‚   â””â”€â”€ evaluate.py         # Model evaluation
â”‚   â”œâ”€â”€ recommendations/
â”‚   â”‚   â””â”€â”€ engine.py           # Action recommendations
â”‚   â”œâ”€â”€ templates/              # Message templates
â”‚   â”œâ”€â”€ storage/
â”‚   â”‚   â””â”€â”€ actions_store.py    # Action logging
â”‚   â””â”€â”€ utils/
â”‚       â”œâ”€â”€ dates.py            # Date utilities
â”‚       â””â”€â”€ logging.py          # Logging config
â”œâ”€â”€ data/sample/                # Sample data
â”œâ”€â”€ scripts/                    # Utility scripts
â””â”€â”€ tests/                      # Unit tests
```

## ğŸ§ª Testing

```bash
# Run all tests
pytest

# With coverage
pytest --cov=cashflowguard --cov-report=html

# Run specific test
pytest tests/test_validators.py -v
```

## ğŸ”§ Advanced Usage

### Custom Thresholds
```bash
cashflowguard plan --data-dir data/ --week 2026-02-09 \
  --late-threshold 5 \
  --high-risk-threshold 70 \
  --min-amount 1000
```

### Export Formats
```bash
# JSON output
cashflowguard analyze --data-dir data/ --format json --output report.json

# HTML dashboard
cashflowguard analyze --data-dir data/ --format html --output report.html
```

### Model Tuning
```bash
# Train with custom parameters
cashflowguard train --data-dir data/ \
  --model-type gradient_boost \
  --max-depth 5 \
  --n-estimators 200 \
  --test-size 0.25
```

## ğŸ“ˆ Roadmap

- [ ] QuickBooks integration
- [ ] Stripe/PayPal payment sync
- [ ] Actual email sending (SMTP)
- [ ] SMS integration (Twilio)
- [ ] Web dashboard (FastAPI + React)
- [ ] Mobile app notifications
- [ ] Multi-currency support enhancement
- [ ] Team collaboration features

## ğŸ¤ Contributing

Contributions welcome! Please:
1. Fork the repo
2. Create a feature branch
3. Add tests for new functionality
4. Ensure all tests pass
5. Submit a pull request

## ğŸ“„ License

MIT License - see LICENSE file for details

## ğŸ™ Acknowledgments

Built to solve real cash-flow problems for small businesses worldwide.

---

**Questions?** Open an issue or reach out to the maintainers.
